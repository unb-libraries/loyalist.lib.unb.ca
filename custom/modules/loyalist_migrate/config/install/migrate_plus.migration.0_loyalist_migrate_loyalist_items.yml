id: 0_loyalist_migrate_loyalist_items
label: 'Loyalist Item'

migration_tags:
  - Loyalist
  - SQL

source:
  plugin: loyalist_item
  key: migrate
process:
  nid: nid
  title:
    plugin: callback
    callable: trim
    source: title
  field_call_number:
    plugin: callback
    callable: trim
    source: field_call_number_value
  field_accompanying_record: field_accompanying_record_value
  field_issuing_body:
    -
      plugin: entity_generate
      source: issuing_body_name
      entity_type: taxonomy_term
      bundle_key: vid
      bundle: issuing_body
      value_key: name
  field_subject_heading:
    -
      plugin: entity_generate
      source: subject_heading_name
      entity_type: taxonomy_term
      bundle_key: vid
      bundle: subject_heading
      value_key: name
  field_other_numbers:
    -
      plugin: sub_process
      source: field_other_numbers_value
      process:
        value: value
        format:
          plugin: default_value
          default_value: wysiwyg
  body:
    -
      plugin: sub_process
      source: body
      process:
        value: value
        format:
          plugin: default_value
          default_value: wysiwyg

destination:
  plugin: 'entity:node'
  default_bundle: loyalist_record
