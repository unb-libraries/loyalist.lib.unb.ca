id: 0_loyalist_migrate_loyalist_items
label: 'Loyalist Item'

migration_tags:
  - Loyalist
  - SQL

source:
  plugin: loyalist_item
  key: migrate

process:
  nid: nid
  title:
    plugin: callback
    callable: trim
    source: title

  body/value:
    -
      plugin: str_replace
      source: field_contents_value
      search: ['<b>', '</b>']
      replace: ['<strong>', '</strong>']

  body/format:
    plugin: default_value
    default_value: wysiwyg

  field_accompanying_record:
    plugin: callback
    callable: trim
    source: field_accompanying_record_value

  field_background_information/value:
    -
      plugin: str_replace
      source: field_background_information_value
      search: [ '<b>', '</b>' ]
      replace: [ '<strong>', '</strong>' ]

  field_background_information/format:
    plugin: default_value
    default_value: wysiwyg

  field_call_number:
    plugin: callback
    callable: trim
    source: field_call_number_value

  field_document_id:
    plugin: callback
    callable: trim
    source: field_document_id_value

  field_finding_aids/value:
    -
      plugin: str_replace
      source: field_finding_aids_value
      search: [ '<b>', '</b>' ]
      replace: [ '<strong>', '</strong>' ]

  field_finding_aids/format:
    plugin: default_value
    default_value: wysiwyg

  field_gauge:
    plugin: callback
    callable: trim
    source: field_gauge_value

  field_issuing_body:
    -
      plugin: entity_generate
      source: issuing_body_name
      entity_type: taxonomy_term
      bundle_key: vid
      bundle: issuing_body
      value_key: name

  field_media_type:
    -
      plugin: entity_generate
      source: media_type_name
      entity_type: taxonomy_term
      bundle_key: vid
      bundle: media_type
      value_key: name

  field_notes/value:
    -
      plugin: str_replace
      source: field_notes_value
      search: [ '<b>', '</b>' ]
      replace: [ '<strong>', '</strong>' ]

  field_notes/format:
    plugin: default_value
    default_value: wysiwyg

  field_number_of_sources:
    plugin: callback
    callable: trim
    source: field_number_of_sources_value

  field_originals/value:
    -
      plugin: str_replace
      source: field_originals_value
      search: [ '<b>', '</b>' ]
      replace: [ '<strong>', '</strong>' ]

  field_originals/format:
    plugin: default_value
    default_value: wysiwyg

  field_other_with/value:
    -
      plugin: str_replace
      source: field_other_with_value
      search: [ '<b>', '</b>' ]
      replace: [ '<strong>', '</strong>' ]

  field_other_with/format:
    plugin: default_value
    default_value: wysiwyg

  field_other_numbers/value:
    -
      plugin: str_replace
      source: field_other_numbers_value
      search: [ '<b>', '</b>' ]
      replace: [ '<strong>', '</strong>' ]

  field_other_numbers/format:
    plugin: default_value
    default_value: wysiwyg

  field_record_info:
    plugin: callback
    callable: trim
    source: field_record_info_value

  field_subject_heading:
    -
      plugin: entity_generate
      source: subject_heading_name
      entity_type: taxonomy_term
      bundle_key: vid
      bundle: subject_heading
      value_key: name

  field_this_is_part_of/value:
    -
      plugin: str_replace
      source: field_this_is_part_of_value
      search: [ '<b>', '</b>' ]
      replace: [ '<strong>', '</strong>' ]

  field_this_is_part_of/format:
    plugin: default_value
    default_value: wysiwyg

  field_volume_info:
    plugin: callback
    callable: trim
    source: field_volume_info_value

destination:
  plugin: 'entity:node'
  default_bundle: loyalist_record
